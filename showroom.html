<html>
<head>
    <title>Live Components</title>
    <link type="text/css" href="css/defaults.css" rel="stylesheet" />
    <script type="application/javascript" src="js/utils.js"></script>
    <script type="application/javascript" src="js/control.js"></script>
    <script type="application/javascript" src="js/control_extensions.js"></script>
    <script type="application/javascript" src="js/spinner.js"></script>
    <script type="application/javascript" src="js/toggler.js"></script>
    <script type="application/javascript" src="js/selector.js"></script>
    <script type="application/javascript" src="js/slider.js"></script>
    <script type="application/javascript">
        var longItemArray = [  "1",  "2",  "3",  "4",  "5",  "6",  "7",  "8",  "9", "10",
                              "11", "12", "13", "14", "15", "16", "17", "18", "19", "20",
                              "21", "22", "23", "24", "25", "26", "27", "28", "29", "30" ];

        function printLine(text) {
            var pElement = document.getElementById("output");
            pElement.insertBefore(document.createElement("br"), pElement.firstChild);
            pElement.insertBefore(document.createTextNode(text), pElement.firstChild);
        }

        function initialize() {
            new Spinner('spinner_one', {
                title: "Small with long title",
                stateCount: 5,
                keyEventFilter: function(event) {
                    return (event.keyCode >= 65 && event.keyCode <= 69) || event.keyCode == 13;
                },
                externalMapping: {
                    toDisplay: function(state) {
                        return String.fromCharCode(state + 65);
                    },
                    fromDisplay: function(display) {
                        return display.charCodeAt(0) - 65;
                    }
                },
                onchange: function(internalValue, externalValue, state) {
                    printLine("Spinner 1: internal = " + internalValue + " / external = " + externalValue + " / state = " + state);
                }
            });
            new Spinner('spinner_two', {
                mouseScale: 2,
                keyStep: 2,
                disabled: true,
                onchange: function(internalValue, externalValue, state) {
                    printLine("Spinner 2: internal = " + internalValue + " / external = " + externalValue + " / state = " + state);
                }
            });
            new Spinner('spinner_three', {
                title: "Long title",
                state: 101,
                externalMapping: {
                    toDisplay: function(state) {
                        return Math.round(state / 100.0 * 400.0 - 200.0);
                    },
                    fromDisplay: function(display) {
                        return Math.round((parseInt(display) + 200.0) / 400.0 * 100.0);
                    }
                },
                onchange: function(internalValue, externalValue, state) {
                    printLine("Spinner 3: internal = " + internalValue + " / external = " + externalValue + " / state = " + state);
                }
            }, {
                radiusDifference: 5
            });

            new Toggler("toggler_one", {
                title: "Large",
                items: [ "Off", "On" ],
                state: 1,
                internalMapping: {
                    toValue: function(state) { return state ? true : false },
                    fromValue: function(value) { return value ? 1 : 0 }
                },
                onchange: function(internalValue, externalValue, state) {
                    printLine("Toggler 1: internal = " + internalValue + " / external = " + externalValue + " / state = " + state);
                }
            });
            new Toggler("toggler_two", {
                disabled: true,
                onchange: function(internalValue, externalValue, state) {
                    printLine("Toggler 2: internal = " + internalValue + " / external = " + externalValue + " / state = " + state);
                }
            });

            new Selector("selector_one", {
                title: "Select 1",
                items: [ "one", "two", "three" ],
                disabled: true,
                onchange: function(internalValue, externalValue, state) {
                    printLine("Selector 1: internal = " + internalValue + " / external = " + externalValue + " / state = " + state);
                }
            });
            new Selector("selector_two", {
                items: longItemArray,
                onchange: function(internalValue, externalValue, state) {
                    printLine("Selector 2: internal = " + internalValue + " / external = " + externalValue + " / state = " + state);
                }
            });

            new Slider("slider_one", {
                title: "Slide 1",
                stateCount: 101,
                state: 50,
                onchange: function(internalValue, externalValue, state) {
                    printLine("Slider 1: internal = " + internalValue + " / external = " + externalValue + " / state = " + state);
                }
            });
            new Slider("slider_two", {
                disabled: true,
                onchange: function(internalValue, externalValue, state) {
                    printLine("Slider 2: internal = " + internalValue + " / external = " + externalValue + " / state = " + state);
                }
            });
        }
    </script>
</head>
<body onload="initialize();">
    <input />
    <button id="spinner_one" style="display: inline; font-size: 8px; width: 40px; height: 60px;" class="control spinner"></button>
    <button id="spinner_two" style="display: inline;" class="control spinner"></button>
    <button id="spinner_three" style="display: inline; padding-top: 5px;" class="control spinner"></button>
    <button id="toggler_one" style="display: inline; width: 150px; height: 80px; font-size: 30px;" class="control toggler"></button>
    <button id="toggler_two" style="display: inline; width: 60px; height: 24px;" class="control toggler"></button><br/>
    <button id="selector_one" style="display: inline;" class="control selector"></button>
    <button id="selector_two" style="display: inline;" class="control selector"></button>
    <button id="slider_one" style="display: inline;" class="control slider"></button>
    <button id="slider_two" style="display: inline;" class="control slider"></button>
    <input />
    <p id="output"></p>
</body>
</html>
